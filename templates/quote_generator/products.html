{% extends "base.html" %}

{% block title %}
    {% if result.manufacturer %}
	Products by {{ result.manufacturer }}
    {% endif %}
    {% if result.category %}
	Products in category: {{ result.category }}
    {% endif %}
{% endblock %}

{% block custom_js %}
    <script type="text/javascript" src="/site_media/js/product.js"></script>
{% endblock %}

{% block body %}
    {% if result.manufacturer %}
	<h1>Products by {{ result.manufacturer }}</h1>
    {% endif %}
    {% if result.category %}
	<h1>{{ result.category }}</h1>
    {% endif %}

    <div id="products" class="clearfix padtop">
	<table width=100%>
	    <tbody>
		<tr>
		    <th class="head_1"><h3>Product</h3></th>
		{% if result.manufacturer %}
		    <th class="head_2"><h3>Category</h3></th>
		{% endif %}
		{% if result.category %}
		    <th><h3>Manufacturer</h3></th>
		    {% endif %}
		    <th class="head_3">&nbsp;</th>
		</tr>
	    {% for p in result.products %}
		<tr class="product-detail">
		    <td>
			<p><h4><a href="">{{ p.name }}</a></h4></p>
			<p>{{ p.short_description }}</p>
		    </td>
		    <td>
		    {% if result.manufacturer %}
			{% for c in p.categories.values %}
			    <p class="padtop">{{ c.name }}</p>
			{% endfor %}
		    {% endif %}
		    {% if result.category %}
			<p class="padtop">{{ p.manufacturer }}</p>
		    {% endif %}
		    </td>
		    <td>
			<form class="biller">
			    <input type="text"/>
			    <input type="hidden" value="{{ p.pk }}"/>
			    <input type="button" value="Add"/>
			</form>
		    </td>
		</tr>
	    {% endfor %}
	    </tbody>
	</table>
    </div>
{% endblock %}
