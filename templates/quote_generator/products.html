{% extends "quote_generator/base.html" %}

{% block page_title %}
    {% if result.manufacturer %}
	Products by {{ result.manufacturer }}
    {% endif %}
    {% if result.category %}
	Products in category: {{ result.category }}
    {% endif %}
{% endblock %}

{% block page_js %}
    <script type="text/javascript">
	$(function()	{

	    $(".product-detail").hover(
		function()  {
		    $(this).find("#add-quote-item").show();
		},
		function()  {
		    $(this).find("#add-quote-item").hide();
		}
	    );

	    $("#msger").ajaxStart(function()	{
		$(this).slideDown("fast");
	    });

	    $("#preview").lightBox();
	    $('#gallery a').lightBox();

	});
    </script>
    <style type="text/css">
	/* jQuery lightBox plugin - Gallery style */
	#gallery {
		background-color: #444;
		padding: 10px;
		width: 520px;
	}
	#gallery ul { list-style: none; }
	#gallery ul li { display: inline; }
	#gallery ul img {
		border: 5px solid #3e3e3e;
		border-width: 5px 5px 20px;
	}
	#gallery ul a:hover img {
		border: 5px solid #fff;
		border-width: 5px 5px 20px;
		color: #fff;
	}
	#gallery ul a:hover { color: #fff; }
    </style>
{% endblock %}

{% block main %}
    <div class="widget">
	{% if result.manufacturer %}
	    <h1>Products by {{ result.manufacturer }}</h1>
	{% endif %}
	{% if result.category %}
	    <h1>Products In Category: {{ result.category }}</h1>
	{% endif %}
	<p>Hover over products to add.</p>
	<table width="100%" class="product-list padtop">
	    <input id="quote-id" name="quote-id" type="hidden" value="{{ result.quote }}"/>
	    <thead>
		<tr>
		    <th id="header-1"><h3>Product</h3></th>
		    <th id="header-2"><h3>
		    {% if result.manufacturer %}
			Categories
		    {% endif %}
		    {% if result.category %}
			Manufacturer
		    {% endif %}
		    </h3></th>
		    <th id="header-3">&nbsp;</th>
		</tr>
	    </thead>
	    <tbody>
	    {% for p in result.products %}
		<tr class="product-detail">
		    <td>
			<h4><a target="blank" href="{{ result.product_index }}{{ p.product_page }}">{{ p.name }}</a></h4>
			<p>{{ p.short_description }}</p>
			<p><a target="blank" href="{{ result.specs_index }}{{ p.specs_page }}">Specifications</a></p>
		    </td>
		    <td>
		    {% if result.manufacturer %}
			{% for c in p.categories.values %}
			    <p class="padtop">{{ c.name }}</p>
			{% endfor %}
		    {% endif %}
		    {% if result.category %}
			<p class="padtop">{{ p.manufacturer }}</p>
		    {% endif %}
		    </td>
		    <td id="cell{{ p.pk }}">
			<form id="add-quote-item">
			    <input id="quantity{{ p.pk }}" name="quantity" type="text"/>
			    <input type="button" value="Add" id="{{ p.pk }}" onclick="quote(this.value, this.id)"/>
			</form>
			<form class="rem-quote-item">
			    <input type="button" value="Remove" id="{{ p.pk }}" onclick="quote(this.value, this.id)"/>
			</form>
		    </td>
		</tr>
	    {% endfor %}
		<tr>
		    <td></td>
		    <td><p><a href="/product_groups/?quote_id={{ result.quote }}">More Products</a></p></td>
		    <!--<td><p><a href="/quote/{{ result.quote }}/preview/">Preview Quote</a></p></td>-->
		    <td><p><a id="preview" href="#test">Preview Quote</a></p></td>
		</tr>
	    </tbody>
	</table>
    </div>
    <div id="test"><p>This is a test</p></div>
    <div id="gallery">
	<ul>
	    <li>
		<a href="/site_media/js/jquery/lightbox/photos/image1.jpg" title="jQuery lightbox">
		    <img src="/site_media/js/jquery/lightbox/photos/thumb_image1.jpg" width="72" height="72" alt="" />
		</a>
	    </li>
	    <li>
		<a href="/site_media/js/jquery/lightbox/photos/image2.jpg" title="jQuery lightbox">
		    <img src="/site_media/js/jquery/lightbox/photos/thumb_image2.jpg" width="72" height="72" alt="" />
		</a>
	    </li>
	    <li>
		<a href="/site_media/js/jquery/lightbox/photos/image3.jpg" title="jQuery lightbox">
		    <img src="/site_media/js/jquery/lightbox/photos/thumb_image3.jpg" width="72" height="72" alt="" />
		</a>
	    </li>
	    <li>
		<a href="/site_media/js/jquery/lightbox/photos/image4.jpg" title="jQuery lightbox">
		    <img src="/site_media/js/jquery/lightbox/photos/thumb_image4.jpg" width="72" height="72" alt="" />
		</a>
	    </li>
	    <li>
		<a href="/site_media/js/jquery/lightbox/photos/image5.jpg" title="jQuery lightbox">
		    <img src="/site_media/js/jquery/lightbox/photos/thumb_image5.jpg" width="72" height="72" alt="" />
		</a>
	    </li>
	</ul>
    </div>
{% endblock %}
